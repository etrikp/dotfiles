{"mode":"editor","version":1,"windowDimensions":{"x":261,"y":118,"width":1917,"height":1047,"maximized":false},"syntax":{"deserializer":"Syntax","grammarOverridesByPath":{}},"project":{"path":"/Users/etrikp/git/cis-infra","buffers":[{"text":"CIS S/SL\n========\n\nThe Pipeline:\n * Jenkins\n * Gerrit\n * Apt Repository\n\n# Production Deployment #\nssh to alln01-1-csx-infra-001 using CEC / softoken.\n\nClone the sandbox and load the ssl environment configuration.\n```\ngit clone ssh://cis-gerrit.cisco.com:29418/cis-sandbox\ncd cis-sandbox\nfab load:cis-ssl\n```\n\nThe careful deploy:\n```\nfab on:infra-dfw update # Install latest config deb package\nfab on:infra-dfw noop   # Run puppet noop to see expected changes\nfab on:infra-dfw apply  # Run puppet apply\n```\n\nThe reckless deploy:\n```\nfab on:infra-dfw noprompt deploy # Update and apply, don't pause between hosts\n```\n\nNodes:\n * alln01-1-csx-srvc-001 / dfw-jenkins1\n * alln01-1-csx-srvc-002 / dfw-aptrepo1\n * alln01-1-csx-srvc-003 / dfw-gerrit1\n \n# Sandbox Deployment #\n\nThe sandbox can be used to deploy a vagrant environment or into production:\n```\ngit clone ssh://cis-gerrit.cisco.com:29418/cis-sandbox\ncd cis-sandbox\nfab up:cis-ssl\n```\n\n## Deploy Process ##\n\n 1. This repo is cloned into `env/`\n 1. Vagrant vms are created and minimally provisioned (`vagrant up`)\n 1. Bootstrap is performed to install puppet and tooling\n 1. nimbus-infra.deb is downloaded and installed\n 1. puppet apply is run on all hosts\n\n## Required Workarounds ##\n\nAfter the deploy finishes a few things need to performed manually:\n * Login to Gerrit as Admin (\"Gerrit C. Gerrit\") http://192.168.57.13/login/?account_id=1001\n * Add the following groups to http://192.168.57.13/#/admin/create-group/:\n   * Developers\n   * CIS\n   * SDU Test\n   * Identity Management\n * Jump to the access page to force an update of perms: http://192.168.57.13/#/admin/projects/All-Projects,access\n * Click 'Edit' and then 'Save'.  You'll get an error.  Scroll to the top.  Click 'Cancel'.\n * Login to jenkins `vagrant ssh jenkins` and run jjb:\n   * `sudo jenkins-jobs update /etc/jenkins_jobs/config`\n\nThese workarounds are temporary, pending new features being added.\n","markers":{"markers":{"1":{"id":1,"range":[[0,0],[0,0]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":18,"preserveFolds":true,"goalBufferRange":null},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/etrikp/git/cis-infra/README.md","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"ef426b521ab0e7661962373d693d83a759b3d490","deserializer":"TextBuffer"}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"children":[{"id":3,"items":[{"id":18,"softTabs":true,"displayBuffer":{"id":19,"softWrapped":false,"editorWidthInChars":null,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/etrikp/git/cis-infra/README.md","tabLength":2,"invisibles":{"eol":"¬","space":"·","tab":"»","cr":"¤"},"deserializer":"TokenizedBuffer"},"invisibles":{"eol":"¬","space":"·","tab":"»","cr":"¤"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"}],"activeItemUri":"/Users/etrikp/git/cis-infra/README.md","focused":false,"deserializer":"Pane"},{"id":22,"items":[{"deserializer":"MarkdownPreviewView","filePath":"/Users/etrikp/git/cis-infra/README.md","editorId":"18"}],"activeItemUri":"markdown-preview://editor/18","focused":true,"deserializer":"Pane"}],"orientation":"horizontal","deserializer":"PaneAxis"},"activePaneId":22,"deserializer":"PaneContainer","version":1},"fullScreen":false,"packagesWithActiveGrammars":["language-gfm","language-hyperlink","language-todo"],"deserializer":"Workspace"},"packageStates":{"fuzzy-finder":{"/Users/etrikp/git/cis-infra/README.md":1411489999976},"keybinding-resolver":{"attached":false},"metrics":{"sessionLength":41374783},"tree-view":{"directoryExpansionStates":{},"selectedPath":"/Users/etrikp/git/cis-infra/README.md","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200}}}